# ささっと音声メモ Chrome拡張機能 v1.1.4

音声録音とOpenAI Whisper APIを使用したAI文字起こしによる簡単メモツールです。

## 🎯 主な機能

- 🎙️ **高品質音声録音**: マイクを使用した高品質音声録音（1-5分、設定変更可能）
- 🤖 **AI文字起こし**: OpenAI Whisper APIによる高精度な日本語文字起こし
- 📝 **統合履歴管理**: 全ての録音を時系列で一画面表示（最大30件）
- ✏️ **リアルタイム編集**: 文字起こし結果の直接編集機能
- 📋 **ワンクリックコピー**: クリップボードへの瞬時コピー
- 💰 **詳細料金表示**: 各録音のAPI使用料金を小数点以下3桁まで精密表示
- 🔧 **スマート設定管理**: APIキーの安全保存と状況に応じた案内表示
- 🚀 **ワンクリックアクセス**: 拡張機能アイコンクリックで即座に起動
- 🎨 **洗練されたUI**: コンパクトで使いやすいサイドバーデザイン

## 📦 インストール方法

### 1. ファイルの準備
このフォルダ全体をローカルにダウンロードまたはコピーしてください。

### 2. Chrome拡張機能として読み込み
1. Google Chromeを開く
2. アドレスバーに `chrome://extensions/` と入力してEnter
3. 右上の「デベロッパーモード」をオンにする
4. 「パッケージ化されていない拡張機能を読み込む」をクリック
5. このフォルダを選択する

### 3. OpenAI APIキーの設定
1. [OpenAI Platform](https://platform.openai.com/api-keys) でAPIキーを取得
2. Chrome拡張機能のアイコンをクリックしてサイドバーを表示
3. 「⚙️ 設定」ボタンをクリック
4. APIキーを入力して保存
5. APIキー設定後は案内メッセージが自動的に非表示になります

## 🚀 使用方法

### 基本的な使い方
1. Chrome拡張機能のアイコンをクリック（サイドバーが直接表示されます）
2. 初回利用時は「⚙️ 設定」ボタンからOpenAI APIキーを入力
3. サイドバーの「🎙️ 録音開始」ボタンをクリック
4. マイクの使用許可を与える
5. 録音完了後、自動的にAI文字起こしが実行されます
6. 結果が履歴リストに表示されます

### 録音操作
- **録音開始**: 黄色の「🎙️ 録音開始」ボタンをクリック
- **録音停止**: 赤色の「⏹️ 録音停止」ボタンをクリック
- **キャンセル**: 録音中に「❌ キャンセル」ボタンで録音を破棄
- **録音時間**: 1-5分（設定で変更可能）

### 履歴管理
- **表示**: 全ての録音が時系列で一つのリストに表示
- **編集**: 文字起こしテキストをクリックして直接編集可能
- **コピー**: 各履歴の「📋 コピー」ボタンで内容をクリップボードにコピー
- **削除**: 個別の「🗑️ 削除」ボタンまたは「🗑️ 全削除」ボタンで管理
- **自動削除**: 31件目以降は古いものから自動的に削除
- **詳細情報**: 各録音の時間、API使用料金を精密表示

## ⚙️ システム要件

- Google Chrome（最新版推奨）
- マイクアクセス許可
- インターネット接続（API通信のため）
- OpenAI APIキー

## ⚠️ 注意事項

- **APIキーの管理**: APIキーは暗号化されて安全に保存されますが、他の人と共有しないでください
- **録音時間制限**: デフォルト5分（設定で1-5分に変更可能）
- **プライバシー**: 音声データはOpenAIのサーバーに送信されて処理されます
- **料金**: Whisper API使用料金が発生します（約$0.006/分、各録音に詳細表示）
- **自動削除**: 履歴は31件目以降自動削除されます
- **ブラウザ要件**: 最新のGoogle Chromeでの使用を推奨

## 🔧 トラブルシューティング

### サイドバーが表示されない場合
- 拡張機能が正しくインストールされているか確認
- ブラウザを再起動して再試行
- 拡張機能を無効化→有効化で再試行

### 録音ができない場合
- ブラウザのマイクアクセス許可を確認（設定 > プライバシーとセキュリティ > サイトの設定）
- 他のアプリケーションがマイクを使用していないか確認
- ページを再読み込みして再試行

### 文字起こしができない場合
- インターネット接続を確認
- OpenAI APIキーが正しく設定されているか確認（設定画面で再入力）
- OpenAI API使用制限や残高を確認
- APIキー設定後、案内メッセージが消えるか確認

### 履歴が表示されない・同期されない場合
- Chrome拡張機能の同期設定を確認
- 別のデバイスでChromeにログインしている場合、同期に時間がかかる場合があります
- ローカルストレージがフォールバックとして使用されます

## 📁 ファイル構成

```
ささっと音声メモ_拡張/
├── .gitignore             # Git除外設定ファイル
├── manifest.json          # Chrome拡張機能のマニフェスト（v3）
├── content.js             # メイン機能のJavaScript（サイドバーUI、録音、文字起こし）
├── sidebar.css            # サイドバーのスタイル（クリーンデザイン）
├── background.js          # バックグラウンドスクリプト（アイコンクリック処理）
├── popup.html             # ポップアップUI（参考用、現在は未使用）
├── popup.js               # ポップアップのJavaScript（参考用、現在は未使用）
├── icons/                 # アイコンファイル
│   ├── icon16.png
│   ├── icon32.png
│   ├── icon48.png
│   └── icon128.png
├── icon.svg              # SVGアイコン（参考用）
├── ささっとアイコン.png    # メインアイコンファイル
└── README.md             # このファイル
```

## 🔧 技術仕様

- **音声録音**: Web Audio API + MediaRecorder API（高品質録音）
- **文字起こし**: OpenAI Whisper API（日本語最適化）
- **データ保存**: Chrome Storage API (chrome.storage.sync) + localStorage フォールバック
- **UI**: サイドバー形式（固定幅320px、一画面完結型クリーンデザイン）
- **対応サイト**: 全てのWebサイトで動作
- **操作方式**: ワンクリックアクセス（ポップアップなし）
- **料金計算**: リアルタイムでAPI使用料金を小数点以下3桁まで精密計算・表示
- **レイアウト**: サイドバー表示時にメインコンテンツが適切に調整される

## 📈 更新履歴

### v1.1.4 (最新)
- 🎨 **閉じるボタンのデザイン改善**: 右上にひっそりと配置する洗練されたデザイン
  - 半透明の白背景と薄いボーダーで目立たないデザイン
  - 小さな円形ボタン（24x24px）で控えめな存在感
  - ホバー時に少し目立つように調整
  - 添付画像のようなひっそりとした×ボタンデザインを実現

### v1.1.3
- 🎨 **UIの見やすさ大幅改善**: ユーザーが見やすいように全体的なレイアウトを改善
  - 録音開始ボタンをセンタリング（margin: 0 auto, display: block）
  - 全ボタンにアイコン追加（⚙️設定、📋コピー、🗑️削除）
  - 適切なマージン追加で見やすさ向上
  - 文字がウィンドウサイズの左側にぶつからないように改善

### v1.1.2
- 🎨 **録音ボタンのデザイン改善**: より使いやすく見やすいボタンデザインに改善
  - 録音ボタンの幅を自動調整（min-width: 120px, max-width: 200px）
  - 絵文字を🎤から🎙️（マイクアイコン）に変更
  - 専用のCSSクラスvoice-memo-btn-recordを追加
  - よりコンパクトで見やすいボタンデザインに改善

### v1.1.1
- 📏 **サイドバーの幅を縮小**: よりコンパクトで使いやすいサイズに改善
  - サイドバーの幅を400pxから320pxに変更
  - right位置を-420pxから-340pxに調整
  - bodyのpadding-rightも320pxに調整
  - よりコンパクトで使いやすいサイズに改善

### v1.1.0
- 🎯 **メインコンテンツレイアウト問題の修正**: サイドバー表示時のレイアウト問題を解決
  - 複雑なwidth調整を削除してシンプルなpadding-rightのみに変更
  - メインコンテンツの幅を変更せずにサイドバー分のスペースを確保
  - ウェブサイトのレイアウトと競合しない安全なアプローチに変更
  - メインコンテンツが確実に表示されるように改善

### v1.0.9
- 🎨 **UI表示のすっきり化**: 不要な表示を削除してよりクリーンなUIに改善
  - 録音時間上限とAPI使用料金の表示を削除（設定画面に移動）
  - APIキー状態に応じた通知表示の改善
  - タブ表示を削除してUIをシンプル化
  - よりクリーンで使いやすいUIに改善

### v1.0.8
- 🔧 **サイドバーの見た目とレイアウト問題を修正**: スクロールバーとレイアウト調整の改善
  - サイドバーの縦スクロールバーを追加（overflow-y: auto）
  - レイアウト調整方法を改善（margin-right → width調整）
  - ページ全体の幅をcalc(100vw - 400px)で調整
  - メインコンテンツエリアも適切に調整

### v1.0.7
- 🎨 **サイドバー表示時のページレイアウト調整**: 右上のアイコンやメニューが隠れないように改善
  - サイドバー表示時にページ全体を左にシフト
  - 固定要素（ヘッダー、ナビゲーション）も調整
  - スムーズなアニメーション効果を追加
  - レスポンシブ対応（モバイルでは全画面表示）

### v1.0.6
- 💰 **料金表示の精度向上**: より正確で分かりやすい料金表示に改善
  - 小数点以下3桁表示（0.01円未満は3桁、0.1円未満は2桁、0.1円以上は1桁）
  - 最低料金なしの正確な比例計算
  - より正確な録音時間推定
  - ユーザーにとって分かりやすい料金表示

### v1.0.5
- 🔧 **Extension context invalidated エラーの修正**: より安定した動作を実現
  - Chrome Storage APIの利用可能性チェックを強化
  - localStorageフォールバック機能の改善
  - エラーハンドリングの強化
  - より安定したデータ保存機能

### v1.0.4
- 🎨 **デザイン刷新**: シンプルで清潔なUIに全面リニューアル
  - 白ベース・黒文字・黄色アクセントのクリーンなデザイン
  - ボタンや入力フィールドをミニマルスタイルに統一
  - 視覚効果（影・グラデーション）を最小化
- 💰 **API料金表示の詳細化**: より具体的なコスト情報を提供
  - 正確な音声長計算（秒単位）
  - ファイルサイズとUSD/JPY両方の料金表示
  - 履歴項目に詳細なコスト情報を追加

### v1.0.3
- 🔀 **タブ機能の改善**: 録音画面と履歴画面の明確な分離
  - 録音タブ: 録音コントロール + 最新録音結果のみ表示
  - 履歴タブ: 過去の録音履歴（2件目以降）のみ表示
  - タブの切り替えが正しく動作するように修正
- 🎯 **UIレイアウトの最適化**: 録音画面の空間使用を改善

### v1.0.2
- 🎯 **UI最適化**: サイドバーの情報表示を整理
  - 録音時間上限とAPI合計料金の表示を削除（設定画面で確認可能）
  - 各録音に詳細コスト情報が表示されるため重複を解消
- 🔔 **スマート通知**: APIキー設定状況に応じた通知表示
- 🚀 **ワンクリックアクセス**: 拡張機能の操作を簡素化

### v1.0.1
- 🎨 **デザイン刷新**: シンプルで清潔なUIに全面リニューアル
- 💰 **API料金表示の詳細化**: より具体的なコスト情報を提供
- 📐 **レイアウト改善**: サイドバーの空間効率を大幅向上

### v1.0.0: 初回リリース
- 基本的な録音・文字起こし機能
- 履歴管理機能
- 設定機能

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 🆘 サポート

問題が発生した場合は、以下を確認してください：

### 基本チェック項目
1. **拡張機能**: Chrome拡張機能が最新版（v1.1.4）であること
2. **APIキー**: OpenAI APIキーが正しく設定されていること
3. **権限**: マイクアクセス許可が付与されていること
4. **接続**: インターネット接続が安定していること

### 設定確認方法
1. 拡張機能アイコンをクリックしてサイドバーを表示
2. APIキー未設定の場合、案内メッセージが表示されます
3. 「⚙️ 設定」ボタンから設定画面を開き、各項目を確認

### よくある解決方法
- ブラウザの再起動
- 拡張機能の再読み込み（無効化→有効化）
- APIキーの再入力
- マイク権限の再設定

技術的な問題や詳細なサポートについては、開発者にお問い合わせください。

---

**ささっと音声メモ v1.1.4** - 音声を文字に、もっと簡単に。