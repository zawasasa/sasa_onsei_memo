# Chrome拡張機能「音声メモツール」要件定義書

## 概要

### プロジェクト名
音声メモツール Chrome拡張機能

### 目的
ユーザーが作業中の瞬間にメモしたいことや覚えておきたいことを音声で入力し、AIによる文字起こしを通じて簡単にテキスト化できるツールの提供

## 基本機能

### 主要機能
- **音声録音機能**: マイクを使用した音声の録音
- **文字起こし機能**: OpenAI Whisper APIを使用したテキスト変換
- **履歴管理機能**: 過去の文字起こし履歴の保存・管理
- **テキスト編集機能**: 文字起こし結果の編集
- **コピー機能**: テキストのクリップボードへのコピー

### 起動方法
Chrome拡張機能ボタンをクリックしてサイドバーを表示

### 対象サイト
全てのWebサイトで動作（制限なし）

## UI/UX仕様

### サイドバー仕様
- **表示方法**: Chrome拡張機能ボタンクリック時に表示
- **幅**: 常識的な範囲内（推奨300-400px程度）
- **表示状態**: 常時表示（ユーザーが閉じるまで）
- **閉じる機能**: サイドバー内に閉じるボタンを配置

### 録音機能UI
- **録音開始ボタン**: クリックで録音開始
- **録音停止ボタン**: 録音中に表示、クリックで録音終了
- **キャンセルボタン**: 録音中に表示、クリックで録音破棄
- **録音インジケーター**: 録音中の視覚的フィードバック（色変化・アニメーション）

### テキスト表示・編集
- **表示形式**: サイドバー内にテキスト表示
- **編集機能**: インライン編集対応
- **コピーボタン**: 各テキストアイテムにコピーボタン配置

## 履歴機能仕様

### 保存仕様
- **保存件数**: 30件まで
- **自動削除**: 31件目以降は古いものから自動削除
- **保存場所**: Chrome拡張機能内（永続化なし）

### 履歴表示項目
- **録音日時**: 各アイテムの最上部に表示
- **自動ラベル**: 文字起こし結果の最初の15文字、または内容を要約した簡潔なタイトル
- **文字起こしテキスト**: 完全なテキスト内容

### 履歴管理機能
- **個別削除**: 各履歴アイテムに削除ボタン
- **全履歴削除**: 設定またはメニューから全履歴を一括削除
- **スクロール表示**: 履歴が多い場合はスクロールで表示

### コピー機能
- **コピー対象**: 文字起こしテキストのみ（録音日時は除外）
- **コピーボタン**: 各履歴アイテムにコピーボタンを配置

## 設定機能

### 設定画面
- **表示方法**: モーダル形式
- **アクセス**: 設定ボタンクリックで表示

### 設定項目
- **OpenAI APIキー**: テキスト入力フィールド
- **録音時間上限**: 5分に設定（固定値）
- **言語設定**: 日本語（固定値）

### データ保存
- **保存方法**: Chrome拡張機能のstorage API（chrome.storage.sync）
- **暗号化**: Chrome標準の暗号化を使用
- **同期**: Chromeアカウント間で同期

## 技術仕様

### 音声録音
- **音質**: 標準品質
- **録音時間上限**: 5分
- **録音環境**: パソコン近くでの録音を想定
- **マイク感度**: 標準設定

### 文字起こしAPI
- **使用API**: OpenAI Whisper API
- **対象言語**: 日本語
- **音声ファイル形式**: ブラウザ標準対応形式

### 権限管理
- **マイクアクセス**: 初回録音時に許可要求
- **APIキー**: ユーザーが設定画面で入力

## エラーハンドリング

### 録音エラー
- **マイクアクセス拒否**: 「録音ができません」のアラート表示
- **録音失敗**: エラーメッセージと再試行案内

### API通信エラー
- **ネットワークエラー**: エラーメッセージ表示
- **認証エラー**: APIキー設定の案内
- **API制限エラー**: 使用制限の案内

### データ保存エラー
- **ストレージエラー**: 保存失敗の通知
- **容量制限**: 古い履歴削除の提案

## 将来拡張可能性

### 機能拡張候補
- 他の文字起こしAPI対応（Gemini APIなど）
- 特定サイトでの動作制限機能
- 録音音質設定
- カスタムショートカットキー
- エクスポート機能

### 設定項目拡張候補
- 履歴保存件数のカスタマイズ
- 自動ラベル生成のカスタマイズ
- UIテーマ設定

## 開発優先度

### Phase 1（必須機能）
1. 基本的な録音機能
2. Whisper APIによる文字起こし
3. サイドバーUI
4. 基本的な履歴表示

### Phase 2（重要機能）
1. 履歴管理（削除・編集）
2. 設定機能
3. エラーハンドリング

### Phase 3（追加機能）
1. UI改善
2. パフォーマンス最適化
3. 将来拡張機能の検討